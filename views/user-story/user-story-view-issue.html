<!-- 
// @file task-view-history.html
// @description - history of issues 
// @author prabhjot_kaur
// @date  15 June 2017
-->  
<div class="row">
    <div class="col-xs-12">  
        <div class="xtraSpace">
            <div class="tab-container">
                <div class="col-md-12">
                    <div class="panel panel-default padding-15x" data-ng-init="getSprintdata()">                        
                        <div class="pull-right">
                            <select class="form-control capitalize"  data-ng-change="viewIssue();" data-ng-model="sprint_id" data-ng-options="option.sprint_name | capitalize for option in sprint_data track by option._id" >                            
                            </select>
                        </div>
                        <div class="page_title">
                            <h1><i class="fa fa-exclamation-triangle" aria-hidden="true"></i>  User Story Issues {{totalUsIssueCount}}</h1>
                        </div> 								
                        <div class="panel-body table-responsive">
                            <table class="table table-striped table-bordered " cellspacing="0 " width="100% ">
                                <thead class="thead-inverse ">
                                    <tr>
                                        <th>Issue Id</th>                                            
                                        <th>Title</th>
                                        <th>Description</th>
                                        <th>Created By</th>
                                        <th>Status</th>
                                        <th>Created</th>
                                        <th>Updated</th>
                                        <th>Efforts</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr data-ng-repeat=" us_issue in user_story_data_issues track by $index" data-ng-show=" totalUsIssueCount > 0">
                                        <td data-ng-bind="'BG-' + us_issue.taskId"></td>
                                        <td data-ng-bind="us_issue.name | capitalize_filter" class="firstCap"></td>
                                        <td data-ng-bind="us_issue.description | capitalize_filter" class="firstCap"></td>
                                        <td data-ng-bind="us_issue.created_by.first_name | capitalize"></td>
                                        <td data-ng-bind="us_issue.status | capitalize"></td>
                                        <td data-ng-bind="us_issue.created_at | convert_date"></td>
                                        <td data-ng-bind="us_issue.modified | convert_date"></td>
                                        <td><div ng-if="us_issue.efforts.length != 0"><p data-ng-repeat="issueEffort in us_issue.efforts">{{issueEffort.total_efforts}} | {{issueEffort.effortLogged_by.first_name}}<br/></p></div>
                                            <div ng-if="us_issue.efforts.length == 0"> - </div>
                                        </td>
                                    </tr> 
                                    <tr data-ng-show="totalUsIssueCount == 0">
                                        <td colspan="8" class="capitalize no-data">no issues found</td>
                                    </tr>                                               
                                </tbody>
                            </table>
                        </div> 
                    </div>
                    <!-- <div ng-if="task_history.length>0"> -->
                    <nav aria-label="Page navigation" class="pull-right">
                        <ul class="pagination" uib-pagination total-items="totalUsIssueCount" data-ng-model="currentPageIssue" boundary-link-numbers="true" max-size="5" rotate="false" data-ng-change="viewIssue()">
                        </ul>
                    </nav><!-- </div> -->
                </div>
                <!-- /.row -->
            </div>
        </div>
    </div>
</div>

